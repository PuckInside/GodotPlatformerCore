# Архитектурные рекомендаций

Годот может показаться неудобным движком, когда вы задумаетесь об организацией кода. Ниже я приведу несколько рекомендаций к вашей архитектуре и организацией кода, который может помочь вам избежать излишне связаного кода и ада сигналов.

## Множественное добавление скриптов

Первая проблема с которым столкнулся лично я, это как добавить к сущности несколько скриптов. Так как нода это скрипт, буквально скрипт, она не может иметь более одного скрипта. Чтобы наша нода, например игрока, могла иметь дополнительные скрипты используйте дочерние ноды. Если учесть, что нода это скрипт, то добавляя дочернюю ноду вы добавляет ему дополнительный скрипт. Пример, вы можете добавить дочернюю ноду Node2D и добавить ему скрипт.

## Built-in скрипты

Если вас смущает, что вместе с сценой вам приходиться тащим вместе с ним и скрипт её главной ноды, то используйте Built-in скрипты. Это сохраняет скрипт в сцене, это можно увидеть если открыть .tsn файл как текстовый. 

## Опеределение сущностей

Наверное, было бы хорошо развести ноды и сущности отдельно. Для себя я определить сущности как сцены. Посути каждая сцена сохраненная отделно от сцен мира, для меня будут сущностями. Так легче придумывать взаимодействия с архитектурой кода.

## Скрипты

Что представляют собой скрипты, скрипты это нода, скрипты это ресурс, скрипты это логика.

Наследуйте скрипты от ноды, если вам нужно процессы(обновления кадра), если хотите делать кастомные ноды. 

Наследуйте скрипты от ресурса, если храните только переменные и ресурсы, с ними удобно работать в редакторе. 

Наследуйте скрипты от RefCounted, если вам нужно просто класс. Важно, с ним нужно уметь работать. В большинстве случаев можно обойтись нодой. 

## Ноды

Можно создавать свои кастомные ноды. Просто создайте скрипт, которая наследует любую ноду. Когда создавать кастомные ноды, если вы понимаете что будете писать один и тот же код в скрипте, то почему бы не инкапсулировать это в отдельную ноду.

Можно создавать уникальные ноды(скрипты), прикрепляя к ней built-in скрипт. Такая нода не будет видна в списке нод. Полезно, если нужно реализовать логику хард кодом, при этом отделяя её от основной ноды.

## Связи и ответственность

Настоятельно рекомендую не связывать дочерние ноды между собой, пусть общаються только через родителя, это убережет вас от сильно связаного кода и ада сигналов. Дочерняя нода должна знать только о родителе, а родитель связывать. Пусть родители и дочерние ноды доверяют друг другу полностью или хотя бы попытаться добиться этого, чтобы избегать постоянных проверок на NULL.
